import{a as re}from"./chunk-SSRJAOUG.js";import{a as me}from"./chunk-RGS6MOVY.js";import"./chunk-IUPR5F2T.js";import{a as ie}from"./chunk-6BT6C4Y3.js";import"./chunk-JEV6CQYR.js";import{a as ne}from"./chunk-C2XUBSDY.js";import{l as ae,m as le}from"./chunk-YLWAUSJG.js";import{c as Z,j as ee,k as te}from"./chunk-DGVE3CBX.js";import{$ as N,Cb as p,Db as d,Ea as A,Eb as T,Ia as i,O as C,Oa as R,Pa as g,Q as w,Wb as W,X as k,Zb as X,_a as f,_b as Y,aa as j,ab as c,ba as V,ca as z,db as G,eb as J,fb as O,gb as q,hb as t,ib as n,jb as x,kb as K,lb as E,mb as u,qa as I,sb as l,t as S,tb as s,ub as v,vb as Q,xb as U,zb as D}from"./chunk-3BEEKYPC.js";function pe(e,m){if(e&1){let o=K();t(0,"oa-error-display",13),E("dismiss",function(){N(o);let _=u();return j(_.error.set(null))}),n()}if(e&2){let o=u();c("error",o.error())}}function de(e,m){if(e&1&&(t(0,"dd",7),l(1),n()),e&2){let o=u(),a;i(),Q("",(a=o.item())==null||a.owner==null?null:a.owner.firstName," ",(a=o.item())==null||a.owner==null?null:a.owner.lastName," ")}}function se(e,m){e&1&&(t(0,"dd",7),l(1),p(2,"translate"),n()),e&2&&(i(),v("",d(2,1,"items.general.available")," "))}function ce(e,m){if(e&1&&(t(0,"div",5)(1,"dt",6),l(2),p(3,"translate"),n(),t(4,"dd",7),l(5),p(6,"date"),n()()),e&2){let o=u(),a;i(2),s(d(3,2,"items.form.purchase-date.label")),i(3),s(d(6,4,(a=o.item())==null?null:a.purchaseDate))}}function _e(e,m){if(e&1&&(t(0,"div",5)(1,"dt",6),l(2),p(3,"translate"),n(),x(4,"dd",14),n()),e&2){let o=u();i(2),s(d(3,2,"items.form.note.label")),i(2),c("innerHTML",o.note(),A)}}function ue(e,m){e&1&&x(0,"span",24)}function fe(e,m){if(e&1&&(t(0,"div")(1,"p",25),l(2,"Item Created"),n(),t(3,"p",26),l(4),n()()),e&2){let o=u().$implicit;i(4),v(" Location ",o.place,"")}}function xe(e,m){if(e&1&&(t(0,"div")(1,"p",25),l(2,"Item Moved"),n(),t(3,"p",26),l(4),n()()),e&2){let o=u().$implicit;i(4),v(" Location: ",o.place,"")}}function ge(e,m){if(e&1&&(t(0,"div")(1,"p",25),l(2,"Item Assigned"),n(),t(3,"p",26),l(4),n()()),e&2){let o=u().$implicit;i(4),v("New Owner: ",o.owner,"")}}function ve(e,m){e&1&&(t(0,"p",25),l(1,"Item Returned"),n())}function ye(e,m){if(e&1&&(t(0,"li")(1,"div",15),f(2,ue,1,0,"span",16),t(3,"div",17)(4,"div")(5,"span",18),V(),t(6,"svg",19),x(7,"path",20),n()()(),z(),t(8,"div",21)(9,"div"),f(10,fe,5,1)(11,xe,5,1)(12,ge,5,1)(13,ve,2,0),n(),t(14,"div",22)(15,"time",23),l(16),p(17,"date"),n()()()()()()),e&2){let o=m.$implicit,a=m.$index,_=m.$count,r;i(2),c("ngIf",a!==_-1),i(8),G(10,(r=o.type)==="created"?10:r==="moved"?11:r==="assigned"?12:r==="returned"?13:-1),i(6),s(d(17,3,o.date))}}var oe=e=>({name:e}),je=(()=>{let m=class m{constructor(){this.item=g(null),this.history=g([]),this.open=g(!1),this.error=g(null),this.api=I(me),this.route=I(Z),this.location=I(W),this.note=R(()=>{try{return this.item()?.note?.trim().replace(/\\n+/g,"\\n").split(`
`).map(a=>a.split(":")).map(([a,_])=>_?`<span class="text-cyan-700">${a?.trim()}</span>: ${_?.trim()}`:`<span class="text-cyan-700">${a?.trim()}</span>`).join("<br/>")}catch{return this.item()?.note}}),this.actions=[{type:"link",label:"places.detail.actions.edit.label",route:["edit"]},{type:"button",label:"places.detail.actions.delete.label",action:()=>this.onDelete_Click(),variant:"danger"}],this.route.paramMap.pipe(S(a=>Number(a.get("id"))),C(a=>this.api.get(a)),S(a=>a.data),w(this.item.set),C(a=>this.api.getHistory(a.id)),w(this.history.set)).subscribe()}onDelete_Click(){this.open.set(!0)}onDeleteConfirm_Click(){this.open.set(!1),this.api.delete(this.item()?.id).subscribe({next:()=>{this.location.back()},error:a=>{this.error.set(a)}})}onCancel(){this.open.set(!1)}};m.\u0275fac=function(_){return new(_||m)},m.\u0275cmp=k({type:m,selectors:[["ng-component"]],standalone:!0,features:[U],decls:54,vars:53,consts:[[3,"title"],[3,"title","actions"],[3,"error","dismiss",4,"ngIf"],[1,"mt-6","border-gray-100"],[1,"divide-y","divide-gray-100"],[1,"px-4","py-6","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-0"],[1,"text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-1","text-sm","leading-6","text-gray-700","sm:col-span-2","sm:mt-0"],[1,"mt-1","text-sm","leading-6","font-mono","text-gray-700","sm:col-span-2","sm:mt-0"],["class","mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",4,"ngIf"],["class","px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",4,"ngIf"],["role","list",1,"-mb-8"],[3,"open","title","body","cancelLabel","confirmLabel","confirm","cancel"],[3,"error","dismiss"],[1,"mt-1","text-sm","leading-6","text-gray-700","sm:col-span-2","sm:mt-0",3,"innerHTML"],[1,"relative","pb-8"],["class","absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden","true",4,"ngIf"],[1,"relative","flex","space-x-3"],[1,"h-8","w-8","rounded-full","bg-cyan-400","flex","items-center","justify-center","ring-8","ring-white"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-white"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"min-w-0","flex-1","flex","justify-between","space-x-4"],[1,"text-right","text-sm","whitespace-nowrap","text-gray-500"],["datetime","2020-09-20"],["aria-hidden","true",1,"absolute","top-4","left-4","-ml-px","h-full","w-0.5","bg-gray-200"],[1,"font-bold","text-cyan-700"],[1,"text-sm","text-gray-500"]],template:function(_,r){if(_&1&&(x(0,"oa-page-header",0),p(1,"translate"),t(2,"oa-page-content"),x(3,"oa-section-header",1),p(4,"translate"),f(5,pe,1,1,"oa-error-display",2),t(6,"div")(7,"div",3)(8,"dl",4)(9,"div",5)(10,"dt",6),l(11),p(12,"translate"),n(),t(13,"dd",7),l(14),n()(),t(15,"div",5)(16,"dt",6),l(17),p(18,"translate"),n(),t(19,"dd",8),l(20),n()(),t(21,"div",5)(22,"dt",6),l(23),p(24,"translate"),n(),f(25,de,2,2,"dd",9)(26,se,3,3,"dd",9),n(),t(27,"div",5)(28,"dt",6),l(29),p(30,"translate"),n(),t(31,"dd",7),l(32),n()(),t(33,"div",5)(34,"dt",6),l(35),p(36,"translate"),n(),t(37,"dd",7),l(38),n()(),f(39,ce,7,6,"div",10)(40,_e,5,4,"div",10),t(41,"div",5)(42,"dt",6),l(43),p(44,"translate"),n(),t(45,"dd",7)(46,"ul",11),O(47,ye,18,5,"li",null,J),n()()()()()(),t(49,"oa-confirm-modal",12),E("confirm",function(){return r.onDeleteConfirm_Click()})("cancel",function(){return r.onCancel()}),p(50,"translate"),p(51,"translate"),p(52,"translate"),p(53,"translate"),n()()),_&2){let y,P,B,F,L,h,b,M,$,H;c("title",d(1,23,"items.detail.title")),i(3),c("title",T(4,25,"items.detail.subtitle",D(49,oe,(y=r.item())==null?null:y.name)))("actions",r.actions),i(2),c("ngIf",r.error()),i(6),s(d(12,28,"items.form.name.label")),i(3),s((P=r.item())==null?null:P.name),i(3),s(d(18,30,"items.form.label.label")),i(3),s((B=r.item())==null?null:B.label),i(3),s(d(24,32,"items.form.owner.label")),i(2),c("ngIf",(F=r.item())==null?null:F.owner),i(),c("ngIf",!((L=r.item())!=null&&L.owner)),i(3),s(d(30,34,"items.form.place.label")),i(3),s((h=r.item())==null||h.place==null?null:h.place.name),i(3),s(d(36,36,"items.form.type.label")),i(3),s((b=r.item())==null||b.type==null?null:b.type.name),i(),c("ngIf",(M=r.item())==null?null:M.purchaseDate),i(),c("ngIf",($=r.item())==null?null:$.note),i(3),s(d(44,38,"items.form.timeline.label")),i(4),q(r.history()),i(2),c("open",r.open())("title",d(50,40,"items.detail.actions.delete.title"))("body",T(51,42,"items.detail.actions.delete.body",D(51,oe,(H=r.item())==null?null:H.name)))("cancelLabel",d(52,45,"items.detail.actions.delete.cancel"))("confirmLabel",d(53,47,"items.detail.actions.delete.confirm"))}},dependencies:[ae,le,ne,te,ee,re,ie,X,Y],encapsulation:2,changeDetection:0});let e=m;return e})();export{je as ItemDetailPage};
