import{a as G,b as J}from"./chunk-U6X2YNOJ.js";import{a as K}from"./chunk-NLU6ZOI6.js";import"./chunk-IUPR5F2T.js";import{a as $}from"./chunk-ZP4QN3YB.js";import{a as Q}from"./chunk-MVWNHWJZ.js";import"./chunk-I76RPWRP.js";import{a as j}from"./chunk-G24275RT.js";import{l as q,m as z}from"./chunk-O52S3HSK.js";import{c as H,j as O,k as R}from"./chunk-OZWXVJEV.js";import{$ as w,Cb as i,Db as r,Eb as g,Ia as o,O as C,Oa as T,Pa as f,Q as x,Wb as A,X as M,Zb as V,_a as k,aa as P,ab as s,hb as a,ib as l,jb as h,kb as F,lb as E,mb as S,qa as y,sb as c,t as b,tb as u,vb as L,xb as N,zb as _}from"./chunk-3BEEKYPC.js";function U(n,p){if(n&1){let v=F();a(0,"oa-error-display",11),E("dismiss",function(){w(v);let m=S();return P(m.error.set(null))}),l()}if(n&2){let v=S();s("error",v.error())}}var D=n=>({name:n}),W=n=>({count:n}),fe=(()=>{let p=class p{constructor(){this.route=y(H),this.api=y(Q),this.itemApi=y(K),this.location=y(A),this.employee=f(null),this.name=T(()=>this.employee()?`${this.employee()?.firstName} ${this.employee()?.lastName}`:""),this.items=f([]),this.open=f(!1),this.error=f(null),this.actions=[{type:"link",label:"employees.detail.actions.edit.label",route:["edit"]},{type:"button",label:"employees.detail.actions.delete.label",action:()=>this.onDelete_Click(),variant:"danger"}]}ngOnInit(){this.route.paramMap.pipe(b(e=>Number(e.get("id"))),C(e=>this.api.get(e)),b(e=>e.data),x(this.employee.set),C(e=>this.itemApi.search({owner:e?.id})),x(e=>this.items.set(e.items))).subscribe()}onDelete_Click(){this.open.set(!0)}onDeleteConfirm_Click(){this.open.set(!1),this.api.delete(this.employee()?.id).subscribe({next:()=>{this.location.back()},error:e=>{this.error.set(e)}})}onCancel(){this.open.set(!1)}};p.\u0275fac=function(m){return new(m||p)},p.\u0275cmp=M({type:p,selectors:[["ng-component"]],standalone:!0,features:[N],decls:34,vars:52,consts:[[3,"title"],[3,"title","actions"],[3,"error","dismiss",4,"ngIf"],[1,"mt-6","border-gray-100"],[1,"divide-y","divide-gray-100"],[1,"px-4","py-6","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-0"],[1,"text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-1","text-sm","leading-6","text-gray-700","sm:col-span-2","sm:mt-0"],[1,"mt-2","text-sm","text-gray-900","sm:col-span-3","sm:mt-0"],["showPlace","true","showOwner","false",3,"items","createMessage","emptyMessage"],[3,"open","title","body","cancelLabel","confirmLabel","confirm","cancel"],[3,"error","dismiss"]],template:function(m,t){if(m&1&&(h(0,"oa-page-header",0),i(1,"translate"),a(2,"oa-page-content"),h(3,"oa-section-header",1),i(4,"translate"),k(5,U,1,1,"oa-error-display",2),a(6,"div")(7,"div",3)(8,"dl",4)(9,"div",5)(10,"dt",6),c(11),i(12,"translate"),l(),a(13,"dd",7),c(14),l()(),a(15,"div",5)(16,"dt",6),c(17),i(18,"translate"),l(),a(19,"dd",7),c(20),l()(),a(21,"div",5)(22,"dt",6),c(23),i(24,"translate"),l(),a(25,"dd",8),h(26,"oa-related-items-list",9),i(27,"translate"),i(28,"translate"),l()()()()(),a(29,"oa-confirm-modal",10),E("confirm",function(){return t.onDeleteConfirm_Click()})("cancel",function(){return t.onCancel()}),i(30,"translate"),i(31,"translate"),i(32,"translate"),i(33,"translate"),l()()),m&2){let d,B,I;s("title",r(1,18,"employees.detail.title")),o(3),s("title",g(4,20,"employees.detail.subtitle",_(44,D,t.name())))("actions",t.actions),o(2),s("ngIf",t.error()),o(6),u(r(12,23,"employees.form.name.label")),o(3),L("",(d=t.employee())==null?null:d.firstName," ",(d=t.employee())==null?null:d.lastName,""),o(3),u(r(18,25,"employees.form.role.label")),o(3),u((B=t.employee())==null?null:B.role),o(3),u(g(24,27,"employees.form.items.label",_(46,W,(I=t.employee())==null?null:I.itemsCount))),o(3),s("items",t.items())("createMessage",r(27,30,"employees.detail.actions.empty.create.title"))("emptyMessage",g(28,32,"employees.detail.actions.empty.create.message",_(48,D,t.name()))),o(3),s("open",t.open())("title",r(30,35,"employees.detail.actions.delete.title"))("body",g(31,37,"employees.detail.actions.delete.body",_(50,D,t.name())))("cancelLabel",r(32,40,"employees.detail.actions.delete.cancel"))("confirmLabel",r(33,42,"employees.detail.actions.delete.confirm"))}},dependencies:[z,j,q,R,O,$,G,J,V],encapsulation:2,changeDetection:0});let n=p;return n})();export{fe as EmployeeDetailPage};
