import{a as H}from"./chunk-ZF6B22YP.js";import"./chunk-IUPR5F2T.js";import{a as k}from"./chunk-6BT6C4Y3.js";import{a as A}from"./chunk-C2GLONQU.js";import"./chunk-JEV6CQYR.js";import{a as q}from"./chunk-C2XUBSDY.js";import{c as o,i as x,l as B,m as w}from"./chunk-YLWAUSJG.js";import{c as F,j as L,k as M,l as I}from"./chunk-DGVE3CBX.js";import{Cb as u,Db as S,Eb as D,Ia as l,O as b,Pa as f,Q as c,Wb as P,X as g,Zb as T,_a as y,a as h,ab as n,hb as d,ib as _,jb as p,lb as C,mb as v,qa as m,t as s,xb as E,zb as N}from"./chunk-3BEEKYPC.js";function j(t,i){if(t&1&&p(0,"oa-error-display",3),t&2){let V=v();n("error",V.error())}}var R=t=>({name:t}),ae=(()=>{let i=class i{constructor(){this.location=m(P),this.fb=m(x),this.api=m(A),this.error=f(null),this.route=m(F),this.name=f(""),this.form=this.fb.nonNullable.group({firstName:this.fb.nonNullable.control("",[o.required,o.minLength(3),o.maxLength(15)]),lastName:this.fb.nonNullable.control("",[o.required,o.minLength(3),o.maxLength(15)]),role:this.fb.nonNullable.control("",[o.required]),id:this.fb.nonNullable.control(-1)}),this.route.paramMap.pipe(s(e=>Number(e.get("id"))),b(e=>this.api.get(e)),s(e=>e.data),c(({firstName:e,lastName:r})=>this.name.set(`${e} ${r}`)),c(e=>this.form.patchValue(h({},e))),I()).subscribe()}onSubmit(){this.form.disable({emitEvent:!1}),this.api.update(this.form.value).subscribe({next:()=>this.location.back(),error:e=>{this.error.set(e),this.form.enable()}})}onCancel(){this.location.back()}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g({type:i,selectors:[["ng-component"]],standalone:!0,features:[E],decls:7,vars:11,consts:[[3,"title"],[3,"error",4,"ngIf"],[3,"form","submitted","cancel"],[3,"error"]],template:function(r,a){r&1&&(p(0,"oa-page-header",0),u(1,"translate"),d(2,"oa-page-content"),p(3,"oa-section-header",0),u(4,"translate"),y(5,j,1,1,"oa-error-display",1),d(6,"oa-employee-form",2),C("submitted",function(){return a.onSubmit()})("cancel",function(){return a.onCancel()}),_()()),r&2&&(n("title",S(1,4,"employees.edit.title")),l(3),n("title",D(4,6,"employees.edit.subtitle",N(9,R,a.name()))),l(2),n("ngIf",a.error()),l(),n("form",a.form))},dependencies:[B,w,q,M,L,H,k,T],encapsulation:2,changeDetection:0});let t=i;return t})();export{ae as EmployeeEditPage};
