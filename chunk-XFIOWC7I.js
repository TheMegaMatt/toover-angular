import{a as k,b as A}from"./chunk-6OSBHDPR.js";import"./chunk-EZXJIDAN.js";import{a as V}from"./chunk-NLU6ZOI6.js";import"./chunk-IUPR5F2T.js";import{a as L}from"./chunk-ZP4QN3YB.js";import"./chunk-W55OIH55.js";import"./chunk-MVWNHWJZ.js";import"./chunk-I76RPWRP.js";import{a as M}from"./chunk-G24275RT.js";import{c as t,i as F,l as q,m as B}from"./chunk-O52S3HSK.js";import{c as T,j as w,k as x}from"./chunk-OZWXVJEV.js";import{Cb as f,Db as D,Eb as S,Ia as m,O as b,Pa as c,Wb as E,X as g,Zb as P,_a as _,a as u,ab as r,b as h,hb as d,ib as y,jb as p,lb as I,mb as C,qa as a,t as s,xb as v,zb as N}from"./chunk-3BEEKYPC.js";function O(o,i){if(o&1&&p(0,"oa-error-display",3),o&2){let H=C();r("error",H.error())}}var R=o=>({name:o}),ae=(()=>{let i=class i{constructor(){this.location=a(E),this.fb=a(F),this.api=a(V),this.route=a(T),this.error=c(null),this.name=c(""),this.form=this.fb.nonNullable.group({name:this.fb.nonNullable.control("",[t.required,t.minLength(4),t.maxLength(25)]),label:this.fb.nonNullable.control("",[t.required,t.minLength(4),t.maxLength(25)]),placeId:this.fb.nonNullable.control(-1,[t.required]),typeId:this.fb.nonNullable.control(-1,[t.required]),ownerId:this.fb.nonNullable.control(null),note:this.fb.nonNullable.control("",[]),purchaseDate:this.fb.nonNullable.control("",[k.pastDate]),id:this.fb.nonNullable.control(-1)})}ngOnInit(){this.route.paramMap.pipe(s(e=>Number(e.get("id"))),b(e=>this.api.get(e)),s(e=>e.data)).subscribe({next:e=>{this.name.set(e.name),this.form.patchValue(h(u({},e),{ownerId:e.owner?.id,placeId:e.place.id,typeId:e.type.id}))}})}onSubmit(){this.form.disable({emitEvent:!1}),this.api.update(this.form.value).subscribe({next:()=>this.location.back(),error:e=>{this.error.set(e),this.form.enable()}})}onCancel(){this.location.back()}};i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=g({type:i,selectors:[["ng-component"]],standalone:!0,features:[v],decls:7,vars:11,consts:[[3,"title"],[3,"error",4,"ngIf"],[3,"form","submitted","cancel"],[3,"error"]],template:function(l,n){l&1&&(p(0,"oa-page-header",0),f(1,"translate"),d(2,"oa-page-content"),p(3,"oa-section-header",0),f(4,"translate"),_(5,O,1,1,"oa-error-display",1),d(6,"oa-item-form",2),I("submitted",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),y()()),l&2&&(r("title",D(1,4,"items.edit.title")),m(3),r("title",S(4,6,"items.edit.subtitle",N(9,R,n.name()))),m(2),r("ngIf",n.error()),m(),r("form",n.form))},dependencies:[B,q,M,x,w,L,A,P],encapsulation:2,changeDetection:0});let o=i;return o})();export{ae as ItemEditPage};
