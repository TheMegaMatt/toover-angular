import{a as K,b as Q}from"./chunk-U6X2YNOJ.js";import{a as U}from"./chunk-NLU6ZOI6.js";import"./chunk-IUPR5F2T.js";import{a as O}from"./chunk-ZP4QN3YB.js";import{a as J}from"./chunk-W55OIH55.js";import"./chunk-I76RPWRP.js";import{a as q}from"./chunk-G24275RT.js";import{l as z,m as G}from"./chunk-O52S3HSK.js";import{c as N,j as R,k as j}from"./chunk-OZWXVJEV.js";import{$ as T,Cb as i,Db as p,Eb as f,Ia as n,O as v,Oa as w,Pa as d,Q as x,Wb as V,X as E,Zb as H,_a as F,aa as k,ab as r,hb as l,ib as s,jb as g,kb as L,lb as D,mb as P,qa as c,sb as h,t as b,tb as y,xb as A,zb as u}from"./chunk-3BEEKYPC.js";function W(a,o){if(a&1){let C=L();l(0,"oa-error-display",11),D("dismiss",function(){T(C);let m=P();return k(m.error.set(null))}),s()}if(a&2){let C=P();r("error",C.error())}}var S=a=>({name:a}),X=a=>({count:a}),fe=(()=>{let o=class o{constructor(){this.route=c(N),this.api=c(J),this.itemApi=c(U),this.location=c(V),this.place=d(null),this.name=w(()=>this.place()?.name??""),this.items=d([]),this.open=d(!1),this.error=d(null),this.actions=[{type:"link",label:"places.detail.actions.edit.label",route:["edit"]},{type:"button",label:"places.detail.actions.delete.label",action:()=>this.onDelete_Click(),variant:"danger"}]}ngOnInit(){this.route.paramMap.pipe(b(e=>Number(e.get("id"))),v(e=>this.api.get(e)),b(e=>e.data),x(this.place.set),v(e=>this.itemApi.search({place:e?.id})),x(e=>this.items.set(e.items))).subscribe()}onDelete_Click(){this.open.set(!0)}onDeleteConfirm_Click(){this.open.set(!1),this.api.delete(this.place()?.id).subscribe({next:()=>{this.location.back()},error:e=>{this.error.set(e)}})}onCancel(){this.open.set(!1)}};o.\u0275fac=function(m){return new(m||o)},o.\u0275cmp=E({type:o,selectors:[["ng-component"]],standalone:!0,features:[A],decls:28,vars:47,consts:[[3,"title"],[3,"title","actions"],[3,"error","dismiss",4,"ngIf"],[1,"mt-6","border-gray-100"],[1,"divide-y","divide-gray-100"],[1,"px-4","py-6","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-0"],[1,"text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-1","text-sm","leading-6","text-gray-700","sm:col-span-2","sm:mt-0"],[1,"mt-2","text-sm","text-gray-900","sm:col-span-3","sm:mt-0"],["showPlace","false",3,"items","createMessage","emptyMessage"],[3,"open","title","body","cancelLabel","confirmLabel","confirm","cancel"],[3,"error","dismiss"]],template:function(m,t){if(m&1&&(g(0,"oa-page-header",0),i(1,"translate"),l(2,"oa-page-content"),g(3,"oa-section-header",1),i(4,"translate"),F(5,W,1,1,"oa-error-display",2),l(6,"div")(7,"div",3)(8,"dl",4)(9,"div",5)(10,"dt",6),h(11),i(12,"translate"),s(),l(13,"dd",7),h(14),s()(),l(15,"div",5)(16,"dt",6),h(17),i(18,"translate"),s(),l(19,"dd",8),g(20,"oa-related-items-list",9),i(21,"translate"),i(22,"translate"),s()()()()(),l(23,"oa-confirm-modal",10),D("confirm",function(){return t.onDeleteConfirm_Click()})("cancel",function(){return t.onCancel()}),i(24,"translate"),i(25,"translate"),i(26,"translate"),i(27,"translate"),s()()),m&2){let _,B,M,I;r("title",p(1,15,"places.detail.title")),n(3),r("title",f(4,17,"places.detail.subtitle",u(39,S,t.name())))("actions",t.actions),n(2),r("ngIf",t.error()),n(6),y(p(12,20,"places.form.name.label")),n(3),y((_=t.place())==null?null:_.name),n(3),y(f(18,22,"places.detail.item.items",u(41,X,(B=t.place())==null?null:B.itemsCount))),n(3),r("items",t.items())("createMessage",p(21,25,"places.detail.actions.empty.create.title"))("emptyMessage",f(22,27,"places.detail.actions.empty.create.message",u(43,S,(M=t.place())==null?null:M.name))),n(3),r("open",t.open())("title",p(24,30,"places.detail.actions.delete.title"))("body",f(25,32,"places.detail.actions.delete.body",u(45,S,(I=t.place())==null?null:I.name)))("cancelLabel",p(26,35,"places.detail.actions.delete.cancel"))("confirmLabel",p(27,37,"places.detail.actions.delete.confirm"))}},dependencies:[z,G,q,j,R,K,Q,O,H],encapsulation:2,changeDetection:0});let a=o;return a})();export{fe as PlaceDetailPage};
